# Telegram-бот прогнозов Sports.ru

Telegram-бот для автоматической рассылки прогнозов со Sports.ru пользователям с возможностью фильтрации по видам спорта и турнирам.

## Описание

Бот автоматически отслеживает новые прогнозы с раздела /predictions на сайте Sports.ru и рассылает их подписчикам в зависимости от их выбранных предпочтений.

## Функционал

- **Регистрация пользователей** - команда `/start`
- **Выбор видов спорта** - футбол, хоккей, баскетбол, теннис и другие
- **Выбор турниров** - фильтрация по конкретным лигам и чемпионатам
- **Автоматическая рассылка** - отправка новых прогнозов в реальном времени
- **Управление подпиской** - команда `/settings` для изменения настроек
- **Отписка** - команда `/stop` для отключения уведомлений

## Структура проекта

```
telegram-predictions-bot/
├── bot.py              # Основной файл бота
├── config.py           # Конфигурация и настройки
├── database.py         # Работа с базой данных
├── parser.py           # Парсер прогнозов Sports.ru
├── scheduler.py        # Планировщик задач
├── handlers.py         # Обработчики команд и callback'ов
├── keyboards.py        # Клавиатуры и кнопки
├── requirements.txt    # Зависимости Python
├── .env.example        # Пример файла с переменными окружения
├── Procfile            # Для деплоя на Render
└── README.md           # Документация
```

## Установка и запуск

### Локально

1. Клонируйте репозиторий
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` на основе `.env.example` и добавьте токен бота
4. Запустите бота:
   ```bash
   python bot.py
   ```

### Деплой на Render.com

1. Создайте новый репозиторий на GitHub и загрузите код
2. Зарегистрируйтесь на [Render.com](https://render.com)
3. Создайте новый **Web Service**
4. Подключите GitHub репозиторий
5. Настройте переменные окружения:
   - `BOT_TOKEN` - токен Telegram бота
   - `WEBHOOK_URL` - URL вашего сервиса на Render (например, `https://your-app.onrender.com`)
6. Выберите бесплатный план (Free)
7. Нажмите "Create Web Service"

## Переменные окружения

- `BOT_TOKEN` - токен Telegram бота от @BotFather
- `WEBHOOK_URL` - URL для webhook (только для продакшена на Render)
- `CHECK_INTERVAL` - интервал проверки новых прогнозов в секундах (по умолчанию 300)
- `DATABASE_URL` - URL базы данных (по умолчанию SQLite)

## Команды бота

- `/start` - Начать работу с ботом и выбрать предпочтения
- `/settings` - Изменить настройки подписок
- `/stop` - Отключить все уведомления
- `/help` - Помощь по командам

## Формат прогноза

Каждый прогноз отправляется в следующем формате:

```
[Турнир], [Команда 1] против [Команда 2]

Начало матча: [дата и время]

[Краткое описание прогноза в 2 абзацах]

[Кнопка со ссылкой на букмекера]
```

## Технологии

- Python 3.10+
- python-telegram-bot 20.x
- BeautifulSoup4 для парсинга
- SQLite для хранения данных
- APScheduler для планирования задач
- Requests для HTTP-запросов

## Автор

Sports.ru Predictions Bot

## Лицензия

MIT
